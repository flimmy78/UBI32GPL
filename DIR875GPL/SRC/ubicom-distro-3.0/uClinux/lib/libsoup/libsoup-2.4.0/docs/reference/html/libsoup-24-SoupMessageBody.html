<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<title>SoupMessageBody</title>
<meta name="generator" content="DocBook XSL Stylesheets V1.73.2">
<link rel="start" href="index.html" title="libsoup Reference Manual">
<link rel="up" href="ch02.html" title="API Reference">
<link rel="prev" href="libsoup-24-SoupMessageHeaders.html" title="SoupMessageHeaders">
<link rel="next" href="libsoup-24-soup-method.html" title="soup-method">
<meta name="generator" content="GTK-Doc V1.9 (XML mode)">
<link rel="stylesheet" href="style.css" type="text/css">
<link rel="chapter" href="ch01.html" title="Tutorial">
<link rel="chapter" href="ch02.html" title="API Reference">
<link rel="index" href="ix01.html" title="Index">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<table class="navigation" id="top" width="100%" summary="Navigation header" cellpadding="2" cellspacing="2">
<tr valign="middle">
<td><a accesskey="p" href="libsoup-24-SoupMessageHeaders.html"><img src="left.png" width="24" height="24" border="0" alt="Prev"></a></td>
<td><a accesskey="u" href="ch02.html"><img src="up.png" width="24" height="24" border="0" alt="Up"></a></td>
<td><a accesskey="h" href="index.html"><img src="home.png" width="24" height="24" border="0" alt="Home"></a></td>
<th width="100%" align="center">libsoup Reference Manual</th>
<td><a accesskey="n" href="libsoup-24-soup-method.html"><img src="right.png" width="24" height="24" border="0" alt="Next"></a></td>
</tr>
<tr><td colspan="5" class="shortcuts"><nobr><a href="#id372415" class="shortcut">Top</a>
                  &#160;|&#160;
                  <a href="#id398488" class="shortcut">Description</a></nobr></td></tr>
</table>
<div class="refentry" lang="en">
<a name="libsoup-24-SoupMessageBody"></a><div class="titlepage"></div>
<div class="refnamediv"><table width="100%"><tr>
<td valign="top">
<h2>
<a name="id372415"></a><span class="refentrytitle">SoupMessageBody</span>
</h2>
<p>SoupMessageBody &#8212; HTTP message body</p>
</td>
<td valign="top" align="right"></td>
</tr></table></div>
<div class="refsynopsisdiv">
<h2>Synopsis</h2>
<pre class="synopsis">



                    <a class="link" href="libsoup-24-SoupMessageBody.html#SoupBuffer">SoupBuffer</a>;
enum                <a class="link" href="libsoup-24-SoupMessageBody.html#SoupMemoryUse">SoupMemoryUse</a>;
<a class="link" href="libsoup-24-SoupMessageBody.html#SoupBuffer">SoupBuffer</a>*         <a class="link" href="libsoup-24-SoupMessageBody.html#soup-buffer-new">soup_buffer_new</a>                     (<a class="link" href="libsoup-24-SoupMessageBody.html#SoupMemoryUse">SoupMemoryUse</a> use,
                                                         <a
href="/usr/share/gtk-doc/html/glib/glib-Basic-Types.html#gconstpointer"
>gconstpointer</a> data,
                                                         <a
href="/usr/share/gtk-doc/html/glib/glib-Basic-Types.html#gsize"
>gsize</a> length);
<a class="link" href="libsoup-24-SoupMessageBody.html#SoupBuffer">SoupBuffer</a>*         <a class="link" href="libsoup-24-SoupMessageBody.html#soup-buffer-new-subbuffer">soup_buffer_new_subbuffer</a>           (<a class="link" href="libsoup-24-SoupMessageBody.html#SoupBuffer">SoupBuffer</a> *parent,
                                                         <a
href="/usr/share/gtk-doc/html/glib/glib-Basic-Types.html#gsize"
>gsize</a> offset,
                                                         <a
href="/usr/share/gtk-doc/html/glib/glib-Basic-Types.html#gsize"
>gsize</a> length);
<a class="link" href="libsoup-24-SoupMessageBody.html#SoupBuffer">SoupBuffer</a>*         <a class="link" href="libsoup-24-SoupMessageBody.html#soup-buffer-new-with-owner">soup_buffer_new_with_owner</a>          (<a
href="/usr/share/gtk-doc/html/glib/glib-Basic-Types.html#gconstpointer"
>gconstpointer</a> data,
                                                         <a
href="/usr/share/gtk-doc/html/glib/glib-Basic-Types.html#gsize"
>gsize</a> length,
                                                         <a
href="/usr/share/gtk-doc/html/glib/glib-Basic-Types.html#gpointer"
>gpointer</a> owner,
                                                         <a
href="/usr/share/gtk-doc/html/glib/glib-Datasets.html#GDestroyNotify"
>GDestroyNotify</a> owner_dnotify);
<a
href="/usr/share/gtk-doc/html/glib/glib-Basic-Types.html#gpointer"
>gpointer</a>            <a class="link" href="libsoup-24-SoupMessageBody.html#soup-buffer-get-owner">soup_buffer_get_owner</a>               (<a class="link" href="libsoup-24-SoupMessageBody.html#SoupBuffer">SoupBuffer</a> *buffer);
<a class="link" href="libsoup-24-SoupMessageBody.html#SoupBuffer">SoupBuffer</a>*         <a class="link" href="libsoup-24-SoupMessageBody.html#soup-buffer-copy">soup_buffer_copy</a>                    (<a class="link" href="libsoup-24-SoupMessageBody.html#SoupBuffer">SoupBuffer</a> *buffer);
void                <a class="link" href="libsoup-24-SoupMessageBody.html#soup-buffer-free">soup_buffer_free</a>                    (<a class="link" href="libsoup-24-SoupMessageBody.html#SoupBuffer">SoupBuffer</a> *buffer);

                    <a class="link" href="libsoup-24-SoupMessageBody.html#SoupMessageBody">SoupMessageBody</a>;
<a class="link" href="libsoup-24-SoupMessageBody.html#SoupMessageBody">SoupMessageBody</a>*    <a class="link" href="libsoup-24-SoupMessageBody.html#soup-message-body-new">soup_message_body_new</a>               (void);
void                <a class="link" href="libsoup-24-SoupMessageBody.html#soup-message-body-free">soup_message_body_free</a>              (<a class="link" href="libsoup-24-SoupMessageBody.html#SoupMessageBody">SoupMessageBody</a> *body);

void                <a class="link" href="libsoup-24-SoupMessageBody.html#soup-message-body-append">soup_message_body_append</a>            (<a class="link" href="libsoup-24-SoupMessageBody.html#SoupMessageBody">SoupMessageBody</a> *body,
                                                         <a class="link" href="libsoup-24-SoupMessageBody.html#SoupMemoryUse">SoupMemoryUse</a> use,
                                                         <a
href="/usr/share/gtk-doc/html/glib/glib-Basic-Types.html#gconstpointer"
>gconstpointer</a> data,
                                                         <a
href="/usr/share/gtk-doc/html/glib/glib-Basic-Types.html#gsize"
>gsize</a> length);
void                <a class="link" href="libsoup-24-SoupMessageBody.html#soup-message-body-append-buffer">soup_message_body_append_buffer</a>     (<a class="link" href="libsoup-24-SoupMessageBody.html#SoupMessageBody">SoupMessageBody</a> *body,
                                                         <a class="link" href="libsoup-24-SoupMessageBody.html#SoupBuffer">SoupBuffer</a> *buffer);
void                <a class="link" href="libsoup-24-SoupMessageBody.html#soup-message-body-truncate">soup_message_body_truncate</a>          (<a class="link" href="libsoup-24-SoupMessageBody.html#SoupMessageBody">SoupMessageBody</a> *body);
void                <a class="link" href="libsoup-24-SoupMessageBody.html#soup-message-body-complete">soup_message_body_complete</a>          (<a class="link" href="libsoup-24-SoupMessageBody.html#SoupMessageBody">SoupMessageBody</a> *body);
<a class="link" href="libsoup-24-SoupMessageBody.html#SoupBuffer">SoupBuffer</a>*         <a class="link" href="libsoup-24-SoupMessageBody.html#soup-message-body-flatten">soup_message_body_flatten</a>           (<a class="link" href="libsoup-24-SoupMessageBody.html#SoupMessageBody">SoupMessageBody</a> *body);
<a class="link" href="libsoup-24-SoupMessageBody.html#SoupBuffer">SoupBuffer</a>*         <a class="link" href="libsoup-24-SoupMessageBody.html#soup-message-body-get-chunk">soup_message_body_get_chunk</a>         (<a class="link" href="libsoup-24-SoupMessageBody.html#SoupMessageBody">SoupMessageBody</a> *body,
                                                         <a
href="/usr/share/gtk-doc/html/glib/glib-Basic-Types.html#goffset"
>goffset</a> offset);

</pre>
</div>
<div class="refsect1" lang="en">
<a name="id398488"></a><h2>Description</h2>
<p>
<a class="link" href="libsoup-24-SoupMessageBody.html#SoupMessageBody"><span class="type">SoupMessageBody</span></a> represents the request or response body of a
<a class="link" href="SoupMessage.html" title="SoupMessage"><span class="type">SoupMessage</span></a>.
</p>
<p>
In addition to <a class="link" href="libsoup-24-SoupMessageBody.html#SoupMessageBody"><span class="type">SoupMessageBody</span></a>, libsoup also defines a "smaller"
data buffer type, <a class="link" href="libsoup-24-SoupMessageBody.html#SoupBuffer"><span class="type">SoupBuffer</span></a>, which is primarily used as a
component of <a class="link" href="libsoup-24-SoupMessageBody.html#SoupMessageBody"><span class="type">SoupMessageBody</span></a>. In particular, when using chunked
encoding to transmit or receive a message, each chunk is
represented as a <a class="link" href="libsoup-24-SoupMessageBody.html#SoupBuffer"><span class="type">SoupBuffer</span></a>.</p>
<p>

</p>
</div>
<div class="refsect1" lang="en">
<a name="id406710"></a><h2>Details</h2>
<div class="refsect2" lang="en">
<a name="id406720"></a><h3>
<a name="SoupBuffer"></a>SoupBuffer</h3>
<a class="indexterm" name="id406732"></a><pre class="programlisting">typedef struct {
	const char *data;
	gsize       length;
} SoupBuffer;
</pre>
<p>
A data buffer, generally used to represent a chunk of a
<a class="link" href="libsoup-24-SoupMessageBody.html#SoupMessageBody"><span class="type">SoupMessageBody</span></a>.
</p>
<p>
<em class="parameter"><code>data</code></em> is a <span class="type">char</span> because that's generally convenient; in some
situations you may need to cast it to <a
href="/usr/share/gtk-doc/html/glib/glib-Basic-Types.html#guchar"
><span class="type">guchar</span></a> or another type.</p>
<p>

</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><p><span class="term">const&#160;char&#160;*<em class="structfield"><code>data</code></em>;</span></p></td>
<td> the data
</td>
</tr>
<tr>
<td><p><span class="term"><a
href="/usr/share/gtk-doc/html/glib/glib-Basic-Types.html#gsize"
>gsize</a>&#160;<em class="structfield"><code>length</code></em>;</span></p></td>
<td> length of <em class="parameter"><code>data</code></em>
</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2" lang="en">
<a name="id406836"></a><h3>
<a name="SoupMemoryUse"></a>enum SoupMemoryUse</h3>
<a class="indexterm" name="id406848"></a><pre class="programlisting">typedef enum {
	SOUP_MEMORY_STATIC,
	SOUP_MEMORY_TAKE,
	SOUP_MEMORY_COPY,
	SOUP_MEMORY_TEMPORARY,
} SoupMemoryUse;
</pre>
<p>
Describes how <a class="link" href="libsoup-24-SoupMessageBody.html#SoupBuffer"><span class="type">SoupBuffer</span></a> should use the data passed in by the
caller.
</p>
<p>
See also <a class="link" href="libsoup-24-SoupMessageBody.html#soup-buffer-new-with-owner"><code class="function">soup_buffer_new_with_owner()</code></a>, which allows to you create a
buffer containing data which is owned by another object.</p>
<p>

</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><p><span class="term"><a name="SOUP-MEMORY-STATIC:CAPS"></a><code class="literal">SOUP_MEMORY_STATIC</code></span></p></td>
<td> The memory is statically allocated and
constant; libsoup can use the passed-in buffer directly and not
need to worry about it being modified or freed.
</td>
</tr>
<tr>
<td><p><span class="term"><a name="SOUP-MEMORY-TAKE:CAPS"></a><code class="literal">SOUP_MEMORY_TAKE</code></span></p></td>
<td> The caller has allocated the memory for the
<a class="link" href="libsoup-24-SoupMessageBody.html#SoupBuffer"><span class="type">SoupBuffer</span></a>'s use; libsoup will assume ownership of it and free it
(with <a
href="/usr/share/gtk-doc/html/glib/glib-Memory-Allocation.html#g-free"
><code class="function">g_free()</code></a>) when it is done with it.
</td>
</tr>
<tr>
<td><p><span class="term"><a name="SOUP-MEMORY-COPY:CAPS"></a><code class="literal">SOUP_MEMORY_COPY</code></span></p></td>
<td> The passed-in data belongs to the caller; the
<a class="link" href="libsoup-24-SoupMessageBody.html#SoupBuffer"><span class="type">SoupBuffer</span></a> will copy it into new memory, leaving the caller free
to reuse the original memory.
</td>
</tr>
<tr>
<td><p><span class="term"><a name="SOUP-MEMORY-TEMPORARY:CAPS"></a><code class="literal">SOUP_MEMORY_TEMPORARY</code></span></p></td>
<td> The passed-in data belongs to the caller,
but will remain valid for the lifetime of the <a class="link" href="libsoup-24-SoupMessageBody.html#SoupBuffer"><span class="type">SoupBuffer</span></a>. The
difference between this and <em class="parameter"><code>SOUP_MEMORY_STATIC</code></em> is that if you copy
a <em class="parameter"><code>SOUP_MEMORY_TEMPORARY</code></em> buffer, it will make a copy of the memory
as well, rather than reusing the original memory.
</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2" lang="en">
<a name="id407024"></a><h3>
<a name="soup-buffer-new"></a>soup_buffer_new ()</h3>
<a class="indexterm" name="id407036"></a><pre class="programlisting"><a class="link" href="libsoup-24-SoupMessageBody.html#SoupBuffer">SoupBuffer</a>*         soup_buffer_new                     (<a class="link" href="libsoup-24-SoupMessageBody.html#SoupMemoryUse">SoupMemoryUse</a> use,
                                                         <a
href="/usr/share/gtk-doc/html/glib/glib-Basic-Types.html#gconstpointer"
>gconstpointer</a> data,
                                                         <a
href="/usr/share/gtk-doc/html/glib/glib-Basic-Types.html#gsize"
>gsize</a> length);</pre>
<p>
Creates a new <a class="link" href="libsoup-24-SoupMessageBody.html#SoupBuffer"><span class="type">SoupBuffer</span></a> containing <em class="parameter"><code>length</code></em> bytes from <em class="parameter"><code>data</code></em>.</p>
<p>

</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>use</code></em>&#160;:</span></p></td>
<td> how <em class="parameter"><code>data</code></em> is to be used by the buffer
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>data</code></em>&#160;:</span></p></td>
<td> data
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>length</code></em>&#160;:</span></p></td>
<td> length of <em class="parameter"><code>data</code></em>
</td>
</tr>
<tr>
<td><p><span class="term"><span class="emphasis"><em>Returns</em></span>&#160;:</span></p></td>
<td> the new <a class="link" href="libsoup-24-SoupMessageBody.html#SoupBuffer"><span class="type">SoupBuffer</span></a>.
</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2" lang="en">
<a name="id407175"></a><h3>
<a name="soup-buffer-new-subbuffer"></a>soup_buffer_new_subbuffer ()</h3>
<a class="indexterm" name="id407187"></a><pre class="programlisting"><a class="link" href="libsoup-24-SoupMessageBody.html#SoupBuffer">SoupBuffer</a>*         soup_buffer_new_subbuffer           (<a class="link" href="libsoup-24-SoupMessageBody.html#SoupBuffer">SoupBuffer</a> *parent,
                                                         <a
href="/usr/share/gtk-doc/html/glib/glib-Basic-Types.html#gsize"
>gsize</a> offset,
                                                         <a
href="/usr/share/gtk-doc/html/glib/glib-Basic-Types.html#gsize"
>gsize</a> length);</pre>
<p>
Creates a new <a class="link" href="libsoup-24-SoupMessageBody.html#SoupBuffer"><span class="type">SoupBuffer</span></a> containing <em class="parameter"><code>length</code></em> bytes "copied" from
<em class="parameter"><code>parent</code></em> starting at <em class="parameter"><code>offset</code></em>. (Normally this will not actually copy
any data, but will instead simply reference the same data as
<em class="parameter"><code>parent</code></em> does.)</p>
<p>

</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>parent</code></em>&#160;:</span></p></td>
<td> the parent <a class="link" href="libsoup-24-SoupMessageBody.html#SoupBuffer"><span class="type">SoupBuffer</span></a>
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>offset</code></em>&#160;:</span></p></td>
<td> offset within <em class="parameter"><code>parent</code></em> to start at
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>length</code></em>&#160;:</span></p></td>
<td> number of bytes to copy from <em class="parameter"><code>parent</code></em>
</td>
</tr>
<tr>
<td><p><span class="term"><span class="emphasis"><em>Returns</em></span>&#160;:</span></p></td>
<td> the new <a class="link" href="libsoup-24-SoupMessageBody.html#SoupBuffer"><span class="type">SoupBuffer</span></a>.
</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2" lang="en">
<a name="id407346"></a><h3>
<a name="soup-buffer-new-with-owner"></a>soup_buffer_new_with_owner ()</h3>
<a class="indexterm" name="id407358"></a><pre class="programlisting"><a class="link" href="libsoup-24-SoupMessageBody.html#SoupBuffer">SoupBuffer</a>*         soup_buffer_new_with_owner          (<a
href="/usr/share/gtk-doc/html/glib/glib-Basic-Types.html#gconstpointer"
>gconstpointer</a> data,
                                                         <a
href="/usr/share/gtk-doc/html/glib/glib-Basic-Types.html#gsize"
>gsize</a> length,
                                                         <a
href="/usr/share/gtk-doc/html/glib/glib-Basic-Types.html#gpointer"
>gpointer</a> owner,
                                                         <a
href="/usr/share/gtk-doc/html/glib/glib-Datasets.html#GDestroyNotify"
>GDestroyNotify</a> owner_dnotify);</pre>
<p>
Creates a new <a class="link" href="libsoup-24-SoupMessageBody.html#SoupBuffer"><span class="type">SoupBuffer</span></a> containing <em class="parameter"><code>length</code></em> bytes from <em class="parameter"><code>data</code></em>. When
the <a class="link" href="libsoup-24-SoupMessageBody.html#SoupBuffer"><span class="type">SoupBuffer</span></a> is freed, it will call <em class="parameter"><code>owner_dnotify</code></em>, passing
<em class="parameter"><code>owner</code></em> to it. You must ensure that <em class="parameter"><code>data</code></em> will remain valid until
<em class="parameter"><code>owner_dnotify</code></em> is called.
</p>
<p>
For example, you could use this to create a buffer containing data
returned from libxml without needing to do an extra copy:
</p>
<p>
</p>
<div class="informalexample"><pre class="programlisting">
xmlDocDumpMemory (doc, &amp;xmlbody, &amp;len);
return soup_buffer_new_with_owner (xmlbody, len, xmlbody,
                                   (GDestroyNotify)xmlFree);
</pre></div>
<p>
</p>
<p>
In this example, <em class="parameter"><code>data</code></em> and <em class="parameter"><code>owner</code></em> are the same, but in other cases
they would be different (eg, <em class="parameter"><code>owner</code></em> would be a object, and <em class="parameter"><code>data</code></em>
would be a pointer to one of the object's fields).</p>
<p>

</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>data</code></em>&#160;:</span></p></td>
<td> data
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>length</code></em>&#160;:</span></p></td>
<td> length of <em class="parameter"><code>data</code></em>
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>owner</code></em>&#160;:</span></p></td>
<td> pointer to an object that owns <em class="parameter"><code>data</code></em>
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>owner_dnotify</code></em>&#160;:</span></p></td>
<td> a function to free/unref <em class="parameter"><code>owner</code></em> when the buffer is
freed
</td>
</tr>
<tr>
<td><p><span class="term"><span class="emphasis"><em>Returns</em></span>&#160;:</span></p></td>
<td> the new <a class="link" href="libsoup-24-SoupMessageBody.html#SoupBuffer"><span class="type">SoupBuffer</span></a>.
</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2" lang="en">
<a name="id407600"></a><h3>
<a name="soup-buffer-get-owner"></a>soup_buffer_get_owner ()</h3>
<a class="indexterm" name="id407612"></a><pre class="programlisting"><a
href="/usr/share/gtk-doc/html/glib/glib-Basic-Types.html#gpointer"
>gpointer</a>            soup_buffer_get_owner               (<a class="link" href="libsoup-24-SoupMessageBody.html#SoupBuffer">SoupBuffer</a> *buffer);</pre>
<p>
Gets the "owner" object for a buffer created with
<a class="link" href="libsoup-24-SoupMessageBody.html#soup-buffer-new-with-owner"><code class="function">soup_buffer_new_with_owner()</code></a>.</p>
<p>

</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>buffer</code></em>&#160;:</span></p></td>
<td> a <a class="link" href="libsoup-24-SoupMessageBody.html#SoupBuffer"><span class="type">SoupBuffer</span></a> created with <a class="link" href="libsoup-24-SoupMessageBody.html#soup-buffer-new-with-owner"><code class="function">soup_buffer_new_with_owner()</code></a>
</td>
</tr>
<tr>
<td><p><span class="term"><span class="emphasis"><em>Returns</em></span>&#160;:</span></p></td>
<td> the owner pointer
</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2" lang="en">
<a name="id407697"></a><h3>
<a name="soup-buffer-copy"></a>soup_buffer_copy ()</h3>
<a class="indexterm" name="id407709"></a><pre class="programlisting"><a class="link" href="libsoup-24-SoupMessageBody.html#SoupBuffer">SoupBuffer</a>*         soup_buffer_copy                    (<a class="link" href="libsoup-24-SoupMessageBody.html#SoupBuffer">SoupBuffer</a> *buffer);</pre>
<p>
Makes a copy of <em class="parameter"><code>buffer</code></em>. In reality, <a class="link" href="libsoup-24-SoupMessageBody.html#SoupBuffer"><span class="type">SoupBuffer</span></a> is a refcounted
type, and calling <a class="link" href="libsoup-24-SoupMessageBody.html#soup-buffer-copy"><code class="function">soup_buffer_copy()</code></a> will normally just increment
the refcount on <em class="parameter"><code>buffer</code></em> and return it. However, if <em class="parameter"><code>buffer</code></em> was
created with <a class="link" href="libsoup-24-SoupMessageBody.html#SOUP-MEMORY-TEMPORARY:CAPS"><span class="type">SOUP_MEMORY_TEMPORARY</span></a> memory, then <a class="link" href="libsoup-24-SoupMessageBody.html#soup-buffer-copy"><code class="function">soup_buffer_copy()</code></a>
will actually return a copy of it, so that the data in the copy
will remain valid after the temporary buffer is freed.</p>
<p>

</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>buffer</code></em>&#160;:</span></p></td>
<td> a <a class="link" href="libsoup-24-SoupMessageBody.html#SoupBuffer"><span class="type">SoupBuffer</span></a>
</td>
</tr>
<tr>
<td><p><span class="term"><span class="emphasis"><em>Returns</em></span>&#160;:</span></p></td>
<td> the new (or newly-reffed) buffer
</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2" lang="en">
<a name="id407828"></a><h3>
<a name="soup-buffer-free"></a>soup_buffer_free ()</h3>
<a class="indexterm" name="id407840"></a><pre class="programlisting">void                soup_buffer_free                    (<a class="link" href="libsoup-24-SoupMessageBody.html#SoupBuffer">SoupBuffer</a> *buffer);</pre>
<p>
Frees <em class="parameter"><code>buffer</code></em>. (In reality, as described in the documentation for
<a class="link" href="libsoup-24-SoupMessageBody.html#soup-buffer-copy"><code class="function">soup_buffer_copy()</code></a>, this is actually an "unref" operation, and may
or may not actually free <em class="parameter"><code>buffer</code></em>.)</p>
<p>

</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody><tr>
<td><p><span class="term"><em class="parameter"><code>buffer</code></em>&#160;:</span></p></td>
<td> a <a class="link" href="libsoup-24-SoupMessageBody.html#SoupBuffer"><span class="type">SoupBuffer</span></a>
</td>
</tr></tbody>
</table></div>
</div>
<hr>
<div class="refsect2" lang="en">
<a name="id407917"></a><h3>
<a name="SoupMessageBody"></a>SoupMessageBody</h3>
<a class="indexterm" name="id407929"></a><pre class="programlisting">typedef struct {
	const char *data;
	goffset     length;
} SoupMessageBody;
</pre>
<p>
A <a class="link" href="SoupMessage.html" title="SoupMessage"><span class="type">SoupMessage</span></a> request or response body.
</p>
<p>
Note that while <em class="parameter"><code>length</code></em> always reflects the full length of the
message body, <em class="parameter"><code>data</code></em> is normally <a
href="/usr/share/gtk-doc/html/glib/glib-Standard-Macros.html#NULL:CAPS"
><code class="literal">NULL</code></a>, and will only be filled in
after <a class="link" href="libsoup-24-SoupMessageBody.html#soup-message-body-flatten"><code class="function">soup_message_body_flatten()</code></a> is called. For client-side
messages, this automatically happens for the response body after it
has been fully read, unless you set the
<a class="link" href="SoupMessage.html#SOUP-MESSAGE-OVERWRITE-CHUNKS:CAPS"><code class="literal">SOUP_MESSAGE_OVERWRITE_CHUNKS</code></a> flags. Likewise, for server-side
messages, the request body is automatically filled in after being
read.
</p>
<p>
As an added bonus, when <em class="parameter"><code>data</code></em> is filled in, it is always terminated
with a '\0' byte (which is not reflected in <em class="parameter"><code>length</code></em>).</p>
<p>

</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><p><span class="term">const&#160;char&#160;*<em class="structfield"><code>data</code></em>;</span></p></td>
<td> the data
</td>
</tr>
<tr>
<td><p><span class="term"><a
href="/usr/share/gtk-doc/html/glib/glib-Basic-Types.html#goffset"
>goffset</a>&#160;<em class="structfield"><code>length</code></em>;</span></p></td>
<td> length of <em class="parameter"><code>data</code></em>
</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2" lang="en">
<a name="id408071"></a><h3>
<a name="soup-message-body-new"></a>soup_message_body_new ()</h3>
<a class="indexterm" name="id408084"></a><pre class="programlisting"><a class="link" href="libsoup-24-SoupMessageBody.html#SoupMessageBody">SoupMessageBody</a>*    soup_message_body_new               (void);</pre>
<p>
Creates a new <a class="link" href="libsoup-24-SoupMessageBody.html#SoupMessageBody"><span class="type">SoupMessageBody</span></a>. <a class="link" href="SoupMessage.html" title="SoupMessage"><span class="type">SoupMessage</span></a> uses this internally; you
will not normally need to call it yourself.</p>
<p>

</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody><tr>
<td><p><span class="term"><span class="emphasis"><em>Returns</em></span>&#160;:</span></p></td>
<td> a new <a class="link" href="libsoup-24-SoupMessageBody.html#SoupMessageBody"><span class="type">SoupMessageBody</span></a>.
</td>
</tr></tbody>
</table></div>
</div>
<hr>
<div class="refsect2" lang="en">
<a name="id408144"></a><h3>
<a name="soup-message-body-free"></a>soup_message_body_free ()</h3>
<a class="indexterm" name="id408156"></a><pre class="programlisting">void                soup_message_body_free              (<a class="link" href="libsoup-24-SoupMessageBody.html#SoupMessageBody">SoupMessageBody</a> *body);</pre>
<p>
Frees <em class="parameter"><code>body</code></em>. You will not normally need to use this, as
<a class="link" href="SoupMessage.html" title="SoupMessage"><span class="type">SoupMessage</span></a> frees its associated message bodies automatically.</p>
<p>

</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody><tr>
<td><p><span class="term"><em class="parameter"><code>body</code></em>&#160;:</span></p></td>
<td> a <a class="link" href="libsoup-24-SoupMessageBody.html#SoupMessageBody"><span class="type">SoupMessageBody</span></a>
</td>
</tr></tbody>
</table></div>
</div>
<hr>
<div class="refsect2" lang="en">
<a name="id408224"></a><h3>
<a name="soup-message-body-append"></a>soup_message_body_append ()</h3>
<a class="indexterm" name="id408237"></a><pre class="programlisting">void                soup_message_body_append            (<a class="link" href="libsoup-24-SoupMessageBody.html#SoupMessageBody">SoupMessageBody</a> *body,
                                                         <a class="link" href="libsoup-24-SoupMessageBody.html#SoupMemoryUse">SoupMemoryUse</a> use,
                                                         <a
href="/usr/share/gtk-doc/html/glib/glib-Basic-Types.html#gconstpointer"
>gconstpointer</a> data,
                                                         <a
href="/usr/share/gtk-doc/html/glib/glib-Basic-Types.html#gsize"
>gsize</a> length);</pre>
<p>
Appends <em class="parameter"><code>length</code></em> bytes from <em class="parameter"><code>data</code></em> to <em class="parameter"><code>body</code></em> according to <em class="parameter"><code>use</code></em>.</p>
<p>

</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>body</code></em>&#160;:</span></p></td>
<td> a <a class="link" href="libsoup-24-SoupMessageBody.html#SoupMessageBody"><span class="type">SoupMessageBody</span></a>
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>use</code></em>&#160;:</span></p></td>
<td> how to use <em class="parameter"><code>data</code></em>
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>data</code></em>&#160;:</span></p></td>
<td> data to append
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>length</code></em>&#160;:</span></p></td>
<td> length of <em class="parameter"><code>data</code></em>
</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2" lang="en">
<a name="id408390"></a><h3>
<a name="soup-message-body-append-buffer"></a>soup_message_body_append_buffer ()</h3>
<a class="indexterm" name="id408403"></a><pre class="programlisting">void                soup_message_body_append_buffer     (<a class="link" href="libsoup-24-SoupMessageBody.html#SoupMessageBody">SoupMessageBody</a> *body,
                                                         <a class="link" href="libsoup-24-SoupMessageBody.html#SoupBuffer">SoupBuffer</a> *buffer);</pre>
<p>
Appends the data from <em class="parameter"><code>buffer</code></em> to <em class="parameter"><code>body</code></em>. (<a class="link" href="libsoup-24-SoupMessageBody.html#SoupMessageBody"><span class="type">SoupMessageBody</span></a> uses
<span class="type">SoupBuffers</span> internally, so this is normally a constant-time
operation that doesn't actually require copying the data in
<em class="parameter"><code>buffer</code></em>.)</p>
<p>

</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>body</code></em>&#160;:</span></p></td>
<td> a <a class="link" href="libsoup-24-SoupMessageBody.html#SoupMessageBody"><span class="type">SoupMessageBody</span></a>
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>buffer</code></em>&#160;:</span></p></td>
<td> a <a class="link" href="libsoup-24-SoupMessageBody.html#SoupBuffer"><span class="type">SoupBuffer</span></a>
</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2" lang="en">
<a name="id408519"></a><h3>
<a name="soup-message-body-truncate"></a>soup_message_body_truncate ()</h3>
<a class="indexterm" name="id408532"></a><pre class="programlisting">void                soup_message_body_truncate          (<a class="link" href="libsoup-24-SoupMessageBody.html#SoupMessageBody">SoupMessageBody</a> *body);</pre>
<p>
Deletes all of the data in <em class="parameter"><code>body</code></em>.</p>
<p>

</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody><tr>
<td><p><span class="term"><em class="parameter"><code>body</code></em>&#160;:</span></p></td>
<td> a <a class="link" href="libsoup-24-SoupMessageBody.html#SoupMessageBody"><span class="type">SoupMessageBody</span></a>
</td>
</tr></tbody>
</table></div>
</div>
<hr>
<div class="refsect2" lang="en">
<a name="id408594"></a><h3>
<a name="soup-message-body-complete"></a>soup_message_body_complete ()</h3>
<a class="indexterm" name="id408606"></a><pre class="programlisting">void                soup_message_body_complete          (<a class="link" href="libsoup-24-SoupMessageBody.html#SoupMessageBody">SoupMessageBody</a> *body);</pre>
<p>
Tags <em class="parameter"><code>body</code></em> as being complete; Call this when using chunked encoding
after you have appended the last chunk.</p>
<p>

</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody><tr>
<td><p><span class="term"><em class="parameter"><code>body</code></em>&#160;:</span></p></td>
<td> a <a class="link" href="libsoup-24-SoupMessageBody.html#SoupMessageBody"><span class="type">SoupMessageBody</span></a>
</td>
</tr></tbody>
</table></div>
</div>
<hr>
<div class="refsect2" lang="en">
<a name="id408668"></a><h3>
<a name="soup-message-body-flatten"></a>soup_message_body_flatten ()</h3>
<a class="indexterm" name="id408681"></a><pre class="programlisting"><a class="link" href="libsoup-24-SoupMessageBody.html#SoupBuffer">SoupBuffer</a>*         soup_message_body_flatten           (<a class="link" href="libsoup-24-SoupMessageBody.html#SoupMessageBody">SoupMessageBody</a> *body);</pre>
<p>
Fills in <em class="parameter"><code>body</code></em>'s data field with a buffer containing all of the
data in <em class="parameter"><code>body</code></em> (plus an additional '\0' byte not counted by <em class="parameter"><code>body</code></em>'s
length field).</p>
<p>

</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>body</code></em>&#160;:</span></p></td>
<td> a <a class="link" href="libsoup-24-SoupMessageBody.html#SoupMessageBody"><span class="type">SoupMessageBody</span></a>
</td>
</tr>
<tr>
<td><p><span class="term"><span class="emphasis"><em>Returns</em></span>&#160;:</span></p></td>
<td> a <a class="link" href="libsoup-24-SoupMessageBody.html#SoupBuffer"><span class="type">SoupBuffer</span></a> containing the same data as <em class="parameter"><code>body</code></em>.
(You must free this buffer if you do not want it.)
</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2" lang="en">
<a name="id409111"></a><h3>
<a name="soup-message-body-get-chunk"></a>soup_message_body_get_chunk ()</h3>
<a class="indexterm" name="id409122"></a><pre class="programlisting"><a class="link" href="libsoup-24-SoupMessageBody.html#SoupBuffer">SoupBuffer</a>*         soup_message_body_get_chunk         (<a class="link" href="libsoup-24-SoupMessageBody.html#SoupMessageBody">SoupMessageBody</a> *body,
                                                         <a
href="/usr/share/gtk-doc/html/glib/glib-Basic-Types.html#goffset"
>goffset</a> offset);</pre>
<p>
Gets a <a class="link" href="libsoup-24-SoupMessageBody.html#SoupBuffer"><span class="type">SoupBuffer</span></a> containing data from <em class="parameter"><code>body</code></em> starting at <em class="parameter"><code>offset</code></em>.
The size of the returned chunk is unspecified. You can iterate
through the entire body by first calling
<a class="link" href="libsoup-24-SoupMessageBody.html#soup-message-body-get-chunk"><code class="function">soup_message_body_get_chunk()</code></a> with an offset of 0, and then on each
successive call, increment the offset by the length of the
previously-returned chunk.
</p>
<p>
If <em class="parameter"><code>offset</code></em> is greater than or equal to the total length of <em class="parameter"><code>body</code></em>,
then the return value depends on whether or not
<a class="link" href="libsoup-24-SoupMessageBody.html#soup-message-body-complete"><code class="function">soup_message_body_complete()</code></a> has been called or not; if it has,
then <a class="link" href="libsoup-24-SoupMessageBody.html#soup-message-body-get-chunk"><code class="function">soup_message_body_get_chunk()</code></a> will return a 0-length chunk
(indicating the end of <em class="parameter"><code>body</code></em>). If it has not, then
<a class="link" href="libsoup-24-SoupMessageBody.html#soup-message-body-get-chunk"><code class="function">soup_message_body_get_chunk()</code></a> will return <a
href="/usr/share/gtk-doc/html/glib/glib-Standard-Macros.html#NULL:CAPS"
><code class="literal">NULL</code></a> (indicating that
<em class="parameter"><code>body</code></em> may still potentially have more data, but that data is not
currently available).</p>
<p>

</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>body</code></em>&#160;:</span></p></td>
<td> a <a class="link" href="libsoup-24-SoupMessageBody.html#SoupMessageBody"><span class="type">SoupMessageBody</span></a>
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>offset</code></em>&#160;:</span></p></td>
<td> an offset
</td>
</tr>
<tr>
<td><p><span class="term"><span class="emphasis"><em>Returns</em></span>&#160;:</span></p></td>
<td> a <a class="link" href="libsoup-24-SoupMessageBody.html#SoupBuffer"><span class="type">SoupBuffer</span></a>, or <a
href="/usr/share/gtk-doc/html/glib/glib-Standard-Macros.html#NULL:CAPS"
><code class="literal">NULL</code></a>.
</td>
</tr>
</tbody>
</table></div>
</div>
</div>
<div class="refsect1" lang="en">
<a name="id409300"></a><h2>See Also</h2>
<a class="link" href="SoupMessage.html" title="SoupMessage"><span class="type">SoupMessage</span></a>
</div>
<div class="refsect1" lang="en">
<a name="id409312"></a><div class="refsect2" lang="en"><a name="id409313"></a></div>
<hr>
<div class="refsect2" lang="en"><a name="id409314"></a></div>
</div>
</div>
</body>
</html>
